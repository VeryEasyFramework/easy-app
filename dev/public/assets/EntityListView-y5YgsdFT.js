import{a as b,o as d,c as f,w as u,m as W,C as h,b as p,g as I,j as E,k as C,i as y,t as w,l as g,O as F,N as D,p as j,f as v,K as L,h as J,P as K,G as c,s as q,Q as $,R as k,S as R,U as G,e as Q,B as H,V as X,_ as Y}from"./RootLayout.vue_vue_type_style_index_0_lang-Br_nyGRA.js";import{M as U,_ as Z,a as M,b as T,e as x,l as ee,T as le}from"./main-C9svN23Z.js";import{C as N}from"./CardWidget-N1jG415S.js";import{_ as S,l as te,a as ae}from"./InputTimestamp.vue_vue_type_script_setup_true_lang-CaKCJ3dB.js";import{a as re,_ as z}from"./InputPassword.vue_vue_type_script_setup_true_lang-B2ThDIOm.js";import{_ as B}from"./InputWrapper.vue_vue_type_script_setup_true_lang-CwPPx3d0.js";const oe=b({__name:"ListDetailLayout",props:{maxWidth:{}},setup(s){return(n,l)=>(d(),f(h,{class:"list-detail",style:W(n.maxWidth?`--max-width:${n.maxWidth}`:"")},{default:u(()=>[p(C,{class:"bg border"},{default:u(()=>[I(n.$slots,"list",{},()=>[E("List")])]),_:3}),p(C,{class:"bg border"},{default:u(()=>[I(n.$slots,"detail",{},()=>[E("Detail")])]),_:3})]),_:3},8,["style"]))}}),ne={class:"text-small text-primary bold item-label"},ie={class:"text-small italic text-primary-bright"},se=b({__name:"EntityListItem",props:{entityDef:{},record:{},active:{type:Boolean},fields:{}},emits:["select"],setup(s,{emit:n}){return(l,o)=>(d(),f(N,{class:j(["full-width entity-list-item position-relative",{active:l.active}]),onClick:o[0]||(o[0]=a=>l.$emit("select",l.record.id))},{default:u(()=>[p(h,{class:"row shrink"},{default:u(()=>[p(h,{class:"col shrink horizontal-align-between"},{default:u(()=>[y("div",ne,w(l.record[l.entityDef.config.titleField||"id"]),1)]),_:1}),p(h,{class:"col shrink"},{default:u(()=>[(d(!0),g(F,null,D(l.fields,a=>(d(),g("div",{key:a},[y("div",ie,w(l.record[a]),1)]))),128))]),_:1})]),_:1}),p(h,{class:"gap-2 pe-2 pt-1 dates col shrink position-absolute top right"},{default:u(()=>[p(h,{class:"col shrink text-tiny italic overflow-visible"},{default:u(()=>[p(U,{icon:"add",size:"0.6"}),p(S,{value:l.record.createdAt,format:"compact"},null,8,["value"])]),_:1}),p(h,{class:"col shrink text-tiny italic overflow-visible"},{default:u(()=>[p(U,{icon:"update",size:"0.6"}),p(S,{value:l.record.updatedAt,format:"compact"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["class"]))}}),ue=b({__name:"ModalView",props:{modelValue:{type:Boolean}},emits:["update:modelValue","close"],setup(s,{emit:n}){function l(){r.value=!1,a("close")}const o=s,a=n,r=v({get:()=>o.modelValue,set:e=>{a("update:modelValue",e)}});return te(e=>{e.key==="Escape"&&l()}),(e,t)=>(d(),f(K,{to:"#modals"},[p(Z,null,{default:u(()=>[r.value?(d(),f(h,{key:0,onClick:L(l,["self"]),class:"modal-wrapper z-max position-fixed top left vh-100 vw-100 horizontal-align-center vertical-align-center"},{default:u(()=>[p(N,null,{default:u(()=>[I(e.$slots,"default",{},()=>[E(" modal ")])]),_:3})]),_:3})):J("",!0)]),_:3})]))}}),de=["name","disabled"],pe=b({__name:"InputInt",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"number","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,de),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),me=["name","disabled"],fe=["value"],ce=b({__name:"InputChoices",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean},choices:{}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("select",{name:e.name,ref_key:"input",ref:a,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},[(d(!0),g(F,null,D(e.choices,i=>(d(),g("option",{key:i.key,value:i.key},w(i.label),9,fe))),128))],8,me),[[R,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),ye=["name","disabled"],be=b({__name:"InputText",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("textarea",{name:e.name,ref_key:"input",ref:a,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,ye),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Ve=["name","disabled"],ve=b({__name:"InputDate",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"date","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Ve),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),_e=["name","disabled"],qe=b({__name:"InputBigInt",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"number","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,_e),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),he=["name","disabled"],$e=b({__name:"InputBoolean",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,he),[[G,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Be=["name","disabled"],ke=b({__name:"InputMultiChoice",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Be),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Oe=["name","disabled"],ge=b({__name:"InputEmail",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Oe),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),we=["name","disabled"],Ce=b({__name:"InputImage",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,we),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Fe=["name","disabled"],De=b({__name:"InputJSON",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("textarea",{name:e.name,ref_key:"input",ref:a,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Fe),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Ie=["name","disabled"],Ee=b({__name:"InputPhone",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Ie),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Le=["name","disabled"],Ue=b({__name:"InputConnection",props:{modelValue:{},label:{},error:{},name:{},required:{type:Boolean},readOnly:{type:Boolean},focus:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l=s,o=n,a=c(),r=v({get:()=>l.modelValue,set:e=>{o("update:modelValue",e)}});return q(()=>{var e;l.focus&&((e=a.value)==null||e.focus())}),(e,t)=>(d(),f(B,{label:e.label,error:e.error,required:e.required,"read-only":e.readOnly},{default:u(()=>[$(y("input",{name:e.name,ref_key:"input",ref:a,type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),disabled:e.readOnly},null,8,Le),[[k,r.value]])]),_:1},8,["label","error","required","read-only"]))}}),Me=b({__name:"EasyInput",props:{modelValue:{},field:{},error:{},focus:{type:Boolean},placeholder:{},noLabel:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:n}){const l={BigIntField:qe,BooleanField:$e,ChoicesField:ce,ConnectionField:Ue,DateField:ve,EmailField:ge,ImageField:Ce,IntField:pe,JSONField:De,MultiChoiceField:ke,PasswordField:re,PhoneField:Ee,TextField:be,DataField:z,IDField:z,TimestampField:ae},o=s;v(()=>{if("required"in o.field)return o.field.required}),v(()=>{if("readOnly"in o.field)return o.field.readOnly});const a=n,r=v({get:()=>o.modelValue,set:e=>{a("update:modelValue",e)}});return(e,t)=>(d(),f(Q(l[o.field.fieldType]),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),field:o.field,required:e.field.required,label:e.field.label,readOnly:e.field.readOnly,error:o.error,name:e.field.key,placeholder:e.placeholder,focus:o.focus,description:e.field.description,noLabel:o.noLabel},null,8,["modelValue","field","required","label","readOnly","error","name","placeholder","focus","description","noLabel"]))}}),ze={class:"title-3"},Ne=b({__name:"NewEntityForm",props:{entityDef:{}},emits:["close"],setup(s,{emit:n}){function l(){V("close")}async function o(){if(!r())return;await T.createEntity(e.entityDef.entityId,t.value)&&l()}let a=[];function r(){let m=!0;return i.value={},a.forEach(_=>{t.value[_.key]||(i.value[_.key]="This field is required.",m=!1)}),m}const e=s,t=c({}),i=c({}),V=n;return q(()=>{a=e.entityDef.fields.filter(m=>m.required),a.forEach(m=>{m.defaultValue&&(t.value[m.key]=m.defaultValue)})}),(m,_)=>(d(),f(C,{class:"row-gap-4"},{default:u(()=>[y("div",ze," New "+w(m.entityDef.label),1),y("form",{onSubmit:_[0]||(_[0]=L(()=>{},["prevent"]))},[p(h,{class:"col-2 row-gap-4 column-gap-3"},{default:u(()=>[(d(!0),g(F,null,D(m.entityDef.fields.filter(O=>O.required),(O,P)=>(d(),f(Me,{focus:P==0,field:O,error:i.value[O.key],modelValue:t.value[O.key],"onUpdate:modelValue":A=>t.value[O.key]=A,key:O.key},null,8,["focus","field","error","modelValue","onUpdate:modelValue"]))),128))]),_:1})],32),p(h,{class:"col shrink horizontal-align-center"},{default:u(()=>[p(M,{onClick:l,icon:"close",color:"error",size:"1"}),p(M,{type:"submit",onClick:L(o,["prevent"]),icon:"check",color:"success",size:"1"})]),_:1})]),_:1}))}}),Se={class:"title-3"},Te={class:"position-relative"},Pe=b({__name:"EntityList",props:{entity:{},activeEntity:{}},emits:["select"],setup(s,{emit:n}){const l=s;function o(){r.value=!0}function a(){r.value=!1}const r=c(!1),e=c([]),t={entityDef:{},loading:c(!0),totalCount:c(0),currentCount:c(0),filteredListFields:[],listOptions:H({filter:{},orderBy:"",order:"asc",limit:50,offset:0})};async function i(){const V=await T.getList(l.entity,t.listOptions);e.value=V.data,t.totalCount.value=V.totalCount,t.currentCount.value=V.rowCount}return X(async()=>{const V=x.entities.find(m=>m.entityId===l.entity);V&&(t.entityDef=V,t.filteredListFields=V.listFields.filter(m=>!["id","createdAt","updatedAt",V.config.titleField].includes(m)),await i())}),ee(l.entity,"list",async V=>{e.value.forEach((m,_)=>{m.id===V.id&&(e.value[_]=V)}),await i()}),(V,m)=>(d(),f(C,{class:"entity-list-wrapper"},{default:u(()=>[y("div",Se,w(t.entityDef.config.label),1),p(N,null,{default:u(()=>[p(h,{class:"list-header col horizontal-align-between"},{default:u(()=>[y("div",Te,[p(z,{name:"search",placeholder:"Search",focus:""}),p(U,{class:"position-absolute right pe-2 center-y",size:"1.2",icon:"search"})]),y("div",null,[p(M,{label:`New ${V.entity}`,onClick:o,icon:"add",size:"1"},null,8,["label"])])]),_:1})]),_:1}),p(h,{class:"list-container"},{default:u(()=>[(d(!0),g(F,null,D(e.value,_=>(d(),f(se,{active:V.activeEntity==_.id,key:_.id,entityDef:t.entityDef,fields:t.filteredListFields,record:_,onSelect:m[0]||(m[0]=O=>V.$emit("select",O))},null,8,["active","entityDef","fields","record"]))),128))]),_:1}),p(ue,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=_=>r.value=_)},{default:u(()=>[p(Ne,{entityDef:t.entityDef,onClose:a},null,8,["entityDef"])]),_:1},8,["modelValue"])]),_:1}))}}),Ae=b({__name:"EntityListView",props:{entity:{},id:{}},setup(s){const n=s;return(l,o)=>(d(),f(oe,{maxWidth:"400px"},{list:u(()=>[p(Pe,{entity:l.entity,activeEntity:l.id,onSelect:o[0]||(o[0]=a=>l.$router.push(`/entity/${l.entity}/${a}`))},null,8,["entity","activeEntity"])]),detail:u(()=>[(d(),f(le,{key:n.id}))]),_:1}))}}),Qe=Y(Ae,[["__scopeId","data-v-4ac484f5"]]);export{Qe as default};
