import{d as y,a as u,B as m,j as h,h as v,N as w,o as d,c as g,w as o,C as i,f as S,b as a,e as B,t as C,p as b,z as j,F as N,M as V}from"./index-BYjH4yJH.js";import{R as x,_ as A,a as D}from"./RecordAttendance-lN3_p2SH.js";import{l as F,o as I}from"./EasyInput.vue_vue_type_script_setup_true_lang-BTbdhf5x.js";import"./ButtonIcon.vue_vue_type_script_setup_true_lang-Cbo9dm9r.js";import"./CardWidget-CLnvhoga.js";import"./FormBase.vue_vue_type_script_setup_true_lang-CON9pmVo.js";import"./TransitionList.vue_vue_type_style_index_0_lang-BLagXTsR.js";import"./Button.vue_vue_type_script_setup_true_lang-D7t9y8YO.js";import"./InputData.vue_vue_type_script_setup_true_lang-D0e4q8ZS.js";const R={class:"title-4"},q=y({__name:"SettingsDetailView",props:{id:{}},setup(_){const r=_,s=u({}),l=m(()=>V.settings.find(e=>e.settingsId===r.id)),k=m(()=>l.value.fieldGroups.filter(e=>e.fields.length>0)),c=u(!1);h(async()=>{c.value=!1,s.value=await v.call("settings","getSettingsRecord",{settingsId:r.id}),c.value=!0}),F(e=>{I(e,async()=>{e.preventDefault(),await v.call("settings","updateSettings",{settingsId:r.id,data:s.value})})}),w(r.id,(e,t)=>{switch(e){case"update":s.value=t;break;case"join":p("join",t);break;case"leave":p("leave",t);break}});const f=u([]);function p(e,t){t.user;const n=t.users;f.value=n}return(e,t)=>c.value?(d(),g(i,{key:0,class:"settings-view"},{default:o(()=>[a(i,{class:"title-area"},{default:o(()=>[B("div",R,C(l.value.config.label),1)]),_:1}),a(i,{class:"row shrink fields-area"},{default:o(()=>[(d(!0),b(N,null,j(k.value,n=>(d(),g(D,{edit:"",group:n,record:s.value,key:n.key},null,8,["group","record"]))),128))]),_:1}),a(i,{class:"row shrink actions-area"},{default:o(()=>[a(x,{users:f.value},null,8,["users"]),a(A,{"entity-def":l.value,record:s.value,type:"settings"},null,8,["entity-def","record"])]),_:1})]),_:1})):S("",!0)}});export{q as default};
