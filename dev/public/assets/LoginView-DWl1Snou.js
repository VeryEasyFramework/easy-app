import{d as b,u as h,r as g,a as d,o as c,c as p,w as a,b as s,C as l,e as S,t as m,f as x,g as v,h as P,n as L,i as k,j as B}from"./index-CQnUWCV4.js";import{_ as E}from"./InputData.vue_vue_type_script_setup_true_lang-DzXQy-iL.js";import{_ as $,a as y}from"./Button.vue_vue_type_script_setup_true_lang-1s5_nbt9.js";import{C as q}from"./CardWidget-BgBev2dT.js";import{_ as N}from"./FormBase.vue_vue_type_script_setup_true_lang-g0x0dRxx.js";const A={class:"title-3"},F=b({__name:"LoginForm",setup(V){const n=h(),e=g({email:"",password:""}),r=g({email:"",password:""}),f=d("Login"),o=d(!1);async function _(){e.password="",o.value=!o.value,f.value=o.value?"Reset Password":"Login"}const t=d(!1);async function C(){if(r.email="",r.password="",!e.email){r.email="Email is required";return}if(o.value){t.value=!0;const w=await P.call("auth","resetPassword",{email:e.email});L({message:w.message,type:"success"}),t.value=!1,await _()}if(!e.password){r.password="Password is required";return}t.value=!0,await n.login(e.email,e.password),t.value=!1,n.isAuthenticated&&await k.push({name:"home"})}return(w,i)=>(c(),p(q,{class:"px-5 py-4"},{default:a(()=>[s(l,{class:"row-gap-5"},{default:a(()=>[s(l,{class:"header horizontal-align-center row-gap-2"},{default:a(()=>[S("div",A,m(f.value),1)]),_:1}),s(N,{name:"login",onSubmitted:C},{default:a(()=>[s(l,{class:"px-3 row-gap-3"},{default:a(()=>[s(E,{label:"Email",placeholder:"Enter your email...",required:"",focus:"",name:"email",error:r.email,modelValue:e.email,"onUpdate:modelValue":i[0]||(i[0]=u=>e.email=u)},null,8,["error","modelValue"]),o.value?x("",!0):(c(),p($,{key:0,label:"Password",required:"",placeholder:"Enter your password...",name:"password",error:r.password,modelValue:e.password,"onUpdate:modelValue":i[1]||(i[1]=u=>e.password=u)},null,8,["error","modelValue"])),s(l,{class:"py-4"},{default:a(()=>[s(y,{type:"submit",disabled:t.value},{default:a(()=>[v(m(t.value?"Submitting...":o.value?"Send Reset Email":"Login"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),s(l,{class:"row justify-center"},{default:a(()=>[s(y,{disabled:t.value,type:"button",class:"flat",onClick:_},{default:a(()=>[v(m(t.value?"Submitting...":o.value?"Back to Login":"Forgot Password"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),M=b({__name:"LoginView",setup(V){return h(),B(async()=>{}),(n,e)=>(c(),p(l,{class:"row horizontal-align-center vertical-align-center"},{default:a(()=>[s(F)]),_:1}))}});export{M as default};
