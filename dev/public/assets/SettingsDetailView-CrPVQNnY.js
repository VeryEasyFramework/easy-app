import{d as w,a as u,B as g,j,h as v,N as S,o as d,c as _,w as o,C as i,f as B,b as a,e as C,t as b,p as N,z as $,F as V,M as x,n as A}from"./index-BLUmWJ0B.js";import{R as D,_ as F,a as I}from"./RecordAttendance-BiT_zv3e.js";import{l as R,o as U}from"./index-DBKjfLVL.js";import"./ButtonIcon.vue_vue_type_script_setup_true_lang-Clz7Z40D.js";import"./CardWidget-DGg9H3FA.js";import"./FormBase.vue_vue_type_script_setup_true_lang-D-zhasFN.js";import"./TransitionList.vue_vue_type_style_index_0_lang-B0UJVPA5.js";import"./Button.vue_vue_type_script_setup_true_lang-Brrfl2U2.js";import"./InputData.vue_vue_type_script_setup_true_lang-DcFuWUzI.js";const G={class:"title-4"},O=w({__name:"SettingsDetailView",props:{id:{}},setup(y){const r=y,t=u({}),l=g(()=>x.settings.find(e=>e.settingsId===r.id)),k=g(()=>l.value.fieldGroups.filter(e=>e.fields.length>0)),c=u(!1);j(async()=>{c.value=!1,t.value=await v.call("settings","getSettingsRecord",{settingsId:r.id}),c.value=!0}),R(e=>{U(e,async()=>{e.preventDefault(),await v.call("settings","updateSettings",{settingsId:r.id,data:t.value})})}),S(r.id,(e,s)=>{switch(e){case"update":t.value=s;break;case"join":p("join",s);break;case"leave":p("leave",s);break}});const f=u([]);function p(e,s){const n=s.user,h=s.users;f.value=h;const m=e==="join"?"joined":"left";A({message:`${n.firstName} ${m} the record`,title:`User ${m}`,type:e==="join"?"success":"warning"})}return(e,s)=>c.value?(d(),_(i,{key:0,class:"settings-view"},{default:o(()=>[a(i,{class:"title-area"},{default:o(()=>[C("div",G,b(l.value.config.label),1)]),_:1}),a(i,{class:"row shrink fields-area"},{default:o(()=>[(d(!0),N(V,null,$(k.value,n=>(d(),_(I,{edit:"",group:n,record:t.value,key:n.key},null,8,["group","record"]))),128))]),_:1}),a(i,{class:"row shrink actions-area"},{default:o(()=>[a(D,{users:f.value},null,8,["users"]),a(F,{"entity-def":l.value,record:t.value,type:"settings"},null,8,["entity-def","record"])]),_:1})]),_:1})):B("",!0)}});export{O as default};
